<!DOCTYPE html>
<html>
  <head>
    <title>tinysells.com</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script>

// 2017-02-12 jj5 - add to python like this (I think):
//  print( open( 'home.html', 'r' ).read() )

function handle_load( element, ev ) {

  $$( 'code' ).focus();
  $$( 'code' ).select();

}

function handle_keypress( element, ev ) {

  if ( ev.keyCode === 13 ) { return go(); }

  set_warning( '', true );

}

function handle_click( element, ev ) {

  return go();

}

function go() {

  try {

    var code = parseInt( $$( 'code' ).value );

    if ( code > 0 && code < 290 ) {

      var url = 'http://tinysells.com/' + code;

      window.location = url;

    }
    else {

      set_warning( 'Invalid code.' );

    }
  }
  catch ( ex ) {

    // we tried...
    set_warning( ex.getMessage() );

  }
}

function set_warning( warning, skip_focus ) {

  // 2017-02-12 jj5 - TODO: HTML encode the warning...
  $$( 'warning' ).innerHTML = warning;

  if ( ! skip_focus ) { $$( 'code' ).select(); }

}

function $$( id ) {

  return document.getElementById( id );

}

    </script>
    <style>
#code {
    border: solid 1px #111;
    height: 21px;
    width: 102px;
    font-size: 15px;
    color: #111;
    padding-left: 5px;
    vertical-align: bottom
}

#submit {
    border: solid 1px #111;
    height: 25px;
    width: 50px;
    color: #111;
}
    </style>
  </head>
  <body onload="handle_load(this,event)">
    <img
      alt="logo"
      src="https://blotcdn.com/0dfb723220/avatars/1468462362879/966173_92vc2fb2tm7olye7vnc0tfyb.jpg"
      style="float:left;"
    >
    <h1>tinysells.com</h1>
    <div>
      <input
        id="code"
        placeholder="tinysells code"
        onkeypress="handle_keypress(this,event)"
      >
      <button
        id="submit"
        onclick="handle_click(this,event)"
      >Go</button>
    </div>
    <div id="warning" style="color:red;margin-top:10px;"></div>
  </body>
</html>
